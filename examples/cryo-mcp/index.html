<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payflow</title>
    <link rel="icon"
        href="https://assets.super.so/10c0a707-23ce-423d-b26e-fa509e9ed296/images/20216544-6959-4f62-8062-ea0317dfc78b/favicon.svg">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #0a0a0a 0%, #111 100%);
            color: #e5e5e5;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .hero {
            text-align: center;
            padding: 20px 0 15px;
            background: linear-gradient(135deg, #111 0%, #1a1a1a 100%);
            border-bottom: 1px solid #333;
        }

        h1 {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: #fff;
            letter-spacing: -0.02em;
        }

        .hero-subtitle {
            font-size: 1rem;
            color: #999;
            margin-bottom: 1rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .main-content {
            padding: 30px 0;
        }

        .section {
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #fff;
        }

        .warning {
            background: #1a1a1a;
            color: #ffa500;
            padding: 12px;
            border: 1px solid #333;
            margin-bottom: 20px;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .config-card {
            background: #111;
            border: 1px solid #333;
            padding: 20px;
            height: fit-content;
        }

        .config-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 12px;
            color: #fff;
        }

        .code-container {
            position: relative;
        }

        pre {
            background: #000;
            color: #e5e5e5;
            padding: 16px;
            overflow-x: auto;
            font-size: 12px;
            line-height: 1.5;
            border: 1px solid #333;
            font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
        }

        .copy-btn {
            background: #333;
            color: #999;
            border: none;
            padding: 4px 8px;
            cursor: pointer;
            font-weight: 500;
            font-size: 11px;
            transition: all 0.15s ease;
            position: absolute;
            top: 8px;
            right: 8px;
        }

        .copy-btn:hover {
            background: #444;
            color: #fff;
        }

        .copy-btn:active {
            background: #555;
        }

        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            align-items: start;
        }

        .tools-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1px;
            background: #333;
        }

        .tool-card {
            background: #111;
            padding: 12px 16px;
            transition: background 0.15s ease;
            border-left: 3px solid transparent;
        }

        .tool-card:hover {
            background: #1a1a1a;
            border-left-color: #ffa500;
        }

        .tool-card:nth-child(even) {
            background: #0f0f0f;
        }

        .tool-card:nth-child(even):hover {
            background: #1a1a1a;
        }

        .tool-name {
            font-weight: 600;
            color: #fff;
            margin-bottom: 6px;
            font-size: 0.9rem;
        }

        .tool-description {
            color: #999;
            font-size: 0.8rem;
            line-height: 1.4;
        }

        .paid-badge {
            display: inline-block;
            background: #ffa500;
            color: #000;
            padding: 1px 6px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-left: 6px;
        }

        .steps {
            list-style: none;
            counter-reset: step-counter;
        }

        .steps li {
            counter-increment: step-counter;
            margin-bottom: 16px;
            padding-left: 40px;
            position: relative;
            color: #e5e5e5;
        }

        .steps li::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0;
            background: #fff;
            color: #000;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
        }

        code {
            background: #1a1a1a;
            color: #ffa500;
            padding: 2px 6px;
            font-size: 0.9em;
            font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
        }

        .footer {
            text-align: center;
            padding: 20px 0;
            border-top: 1px solid #333;
            margin-top: 30px;
        }

        .footer-text {
            color: #666;
            font-size: 0.8rem;
        }

        .link {
            color: #fff;
            text-decoration: none;
        }

        .link:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8rem;
            }

            .hero {
                padding: 20px 0 15px;
            }

            .main-content {
                padding: 20px 0;
            }

            .content-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .tools-grid {
                grid-template-columns: 1fr;
            }

            .tool-card {
                padding: 8px 12px;
            }

            .tool-name {
                font-size: 0.85rem;
            }

            .tool-description {
                font-size: 0.75rem;
                opacity: 1;
                max-height: none;
            }
        }

        .docs-link {
            display: inline-block;
            padding: 8px 16px;
            background: #ffa500;
            color: #000;
            font-weight: 700;
            font-size: 0.9rem;
            border-radius: 6px;
            text-decoration: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: background 0.15s;
        }

        .docs-link:hover {
            background: #ffb733;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 165, 0, 0.3);
        }

        /* Lighter status boxes for processing messages */
        .processing-box {
            background: #0f0f0f;
            color: #b5b5b5;
            padding: 10px 12px;
            font-size: 0.85rem;
            font-style: italic;
            border-left: 3px solid #4ade80;
            margin-top: 4px;
            margin-bottom: 12px;
        }

        .yellow-border {
            border-left-color: #ffa500;
        }

        .green-border {
            border-left-color: #4ade80;
        }

        details.faq-item {
            background: #0f0f0f;
            border: 1px solid #333;
            margin-bottom: 10px;
            border-radius: 4px;
            transition: background 0.2s;
        }

        details.faq-item[open] {
            background: #111;
        }

        details.faq-item summary {
            padding: 14px 16px;
            font-weight: 600;
            cursor: pointer;
            outline: none;
            color: #e5e5e5;
            position: relative;
            list-style: none;
        }
        
        details.faq-item summary::-webkit-details-marker {
            display: none;
        }

        details.faq-item summary:after {
            content: '+';
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.4em;
            font-weight: 400;
            color: #999;
            transition: all 0.2s;
        }

        details.faq-item[open] > summary {
            color: #fff;
        }

        details.faq-item[open] > summary:after {
            content: 'âˆ’';
        }
        
        .faq-answer {
            padding: 0px 16px 16px;
            color: #b5b5b5;
            font-size: 0.9rem;
            line-height: 1.6;
        }
    </style>
</head>

<body>
    <div class="hero">
        <div class="container">
            <h1>Payflow</h1>
            <p class="hero-subtitle">
                An exploration of agentic commerce with micropayments and MCP.
            </p>
            <div style="margin-top: 18px; margin-bottom: 10px;">
                <a href="https://github.com/chainbound/payflow?tab=readme-ov-file#payflow" target="_blank"
                    class="docs-link">
                    <img src="/github.png" alt="GitHub"
                        style="width:18px;height:18px;vertical-align:middle;margin-right:6px;">
                    Documentation
                </a>
            </div>
        </div>
    </div>

    <div class="main-content">
        <div class="container">
            <div class="warning">
                <strong>Setup Required:</strong> Set your <code>PRIVATE_KEY</code> in the payflow configuration
                below.
                This wallet will be used to pay for cryo queries ({{PRICE}} USDC per query). It should be a wallet on
                Base
                with some USDC.
            </div>

            <div class="content-grid">
                <div class="section">
                    <h2 class="section-title">Claude Desktop Configuration</h2>
                    <div class="config-card">
                        <div class="config-title">Add this to your <code>claude_desktop_config.json</code>:</div>
                        <div class="code-container">
                            <pre id="config">{{CONFIG_JSON}}</pre>
                            <button class="copy-btn" onclick="copyToClipboard()">Copy Configuration</button>
                        </div>
                        <div
                            style="margin-top: 12px; padding: 10px; background: #0a0a0a; border: 1px solid #333; border-radius: 4px; font-size: 0.8rem; color: #999;">
                            <strong style="color: #4ade80;">ðŸ”’ Security:</strong> The Payflow server runs entirely
                            on your local machine. Your private key never leaves your computer and is only used locally
                            for payment signing.
                        </div>
                    </div>
                </div>
                <div class="section">
                    <h2 class="section-title">Available Tools</h2>
                    <div class="tools-grid">
                        <div class="tool-card">
                            <div class="tool-name">query_dataset<span class="paid-badge">{{PRICE}} USDC</span></div>
                            <div class="tool-description">Query blockchain data and export to Parquet files, max 10,000
                                blocks at a time</div>
                        </div>
                        <div class="tool-card">
                            <div class="tool-name">help</div>
                            <div class="tool-description">Get help and usage instructions for all available tools</div>
                        </div>
                        <div class="tool-card">
                            <div class="tool-name">list_datasets</div>
                            <div class="tool-description">List all available cryo datasets (blocks, transactions, logs,
                                etc.)</div>
                        </div>
                        <div class="tool-card">
                            <div class="tool-name">get_latest_block_number</div>
                            <div class="tool-description">Get the latest block number for recent data queries</div>
                        </div>
                        <div class="tool-card">
                            <div class="tool-name">describe_dataset</div>
                            <div class="tool-description">Get detailed schema information for any dataset</div>
                        </div>
                        <div class="tool-card">
                            <div class="tool-name">fetch_abi</div>
                            <div class="tool-description">Fetch the ABI for a contract to understand its interface</div>
                        </div>
                        <div class="tool-card">
                            <div class="tool-name">query_sql</div>
                            <div class="tool-description">Run DuckDB SQL queries against your exported data</div>
                        </div>
                        <div class="tool-card">
                            <div class="tool-name">describe_table</div>
                            <div class="tool-description">Describe the schema of a Parquet file</div>
                        </div>
                        <div class="tool-card">
                            <div class="tool-name">translate_event_signature</div>
                            <div class="tool-description">Decode hexadecimal event signatures to human-readable names
                            </div>
                        </div>
                    </div>
                </div>
                <div class="section" style="grid-column: span 2;">
                    <h2 class="section-title">Samples</h2>
                    <div class="config-card">
                        <div class="config-title">Sample Prompt</div>
                        <pre>
Decode the logs of the following transaction: 0x899b8dcbb9c43dbbf20934cf6d620e72316e3a05a8cccd39a2e53759d6df0081

Please extract:
    â€¢ Swap metadata (e.g., tokens involved, amounts, path, DEX or router used)
    â€¢ Net token transfers between the user and the pool (clearly separating inflows and outflows)                        </pre>
                        <div class="processing-box green-border" style="margin-top: 12px;">
                            <strong>Prompt Parsing</strong> â€” Claude reads your request, requests to Cryo MCP which tools are available, and decides which dataset to query.
                        </div>
                        <div class="processing-box green-border" style="margin-top: 12px;">
                            <strong>Payment Request</strong> â€” Claude asks the local Payflow MCP server to generate the signed micropayment payload.
                        </div>
                        <div class="processing-box green-border" style="margin-top: 12px;">
                            <strong>Micropayment</strong> â€” Claude sends the micropayment via x402 to the Cryo MCP server.
                        </div>
                        <div style="font-size: 0.85rem; color:#4ade80; margin-top:4px; margin-bottom:12px;">âœ… Payment processed â€” paid 0.05&nbsp;USDC</div>
                        <div class="processing-box yellow-border" style="margin-top: 12px;">
                            <strong>Payment Verification</strong> â€” Cryo MCP confirms the payment validity via Coinbase facilitator.
                        </div>
                        <div class="processing-box yellow-border" style="margin-top: 12px;">
                            <strong>Data Retrieval</strong> â€” Cryo MCP executes the query via its local node, and sends it back to Claude.
                        </div>
                        <div class="processing-box green-border" style="margin-top: 12px;">
                            <strong>Result Decoding</strong> â€” Claude parses the dataset, and compiles the final answer for you.
                        </div>
                        <div class="config-title" style="margin-top: 8px;">Sample Answer</div>
                        <pre>
Transaction Analysis Summary
    Transaction Hash: 0x899b8dcbb9c43dbbf20934cf6d620e72316e3a05a8cccd39a2e53759d6df0081

Swap Details
    This transaction represents a SKY â†’ WETH swap on Uniswap V3 where:

    User: 0xfbd4cdb413e45a52e2c8312f670e9ce67e794c37
    Pool: 0x764510ab1d39cf300e7abe8f5b8977d18f290628 (SKY/WETH Uniswap V3 Pool)
    Block: 22,639,515

Token Movements
    SKY Transfer (Log 769): User sent 95,067.95 SKY to the pool
    WETH Transfer (Log 768): Pool sent 2.772260 WETH to the user
    Swap Event (Log 770): Recorded the exchange with detailed metadata

Exchange Rate
    Rate: ~34,299 SKY per 1 WETH

Technical Metadata
    SqrtPriceX96: 428,287,079,139,934,610,832,547,040
    Liquidity: 565,170,137,150,867,722,820,494
    Tick: -17,536

                        </pre>
                        <div style="margin-top: 30px; border-top: 1px solid #333; padding-top: 20px;">
                            <div class="config-title">Other Samples</div>
                            <div style="margin-top: 12px;">
                                <details class="faq-item">
                                    <summary> 
                                        Using Cryo, decode the following Ethereum transaction: <code>0x42171c28c97afa70659d57bfdd1c33b0ef6007cafe8b201f80fa5fb176012cba</code>
                                        <br>
                                        Then, generate a Mermaid graph that illustrates the asset flow, including all participants (EOAs, contracts), asset types (ETH, tokens), and value amounts where applicable.
                                    </summary>
                                    <div class="faq-answer">
                                        <div class="mermaid">
                                         flowchart TD
     A[User<br/>0x053516...b07c6] -->|249.954 USDC| B[Router Contract<br/>0x6088d9...c61d0<br/>ðŸ“‹ Log 259: OrderRecord<br/>Order Completed<br/>USDCâ†’ETH]
     B -->|249.954 USDC| C[Uniswap V3 Pool<br/>0xe0554a...32939f<br/>ðŸ”„ Log 256: Swap Event<br/>Liquidity Updated<br/>Tick: 0x3041f]
     C -->|0.0959 WETH| B
     B -->|0.0959 WETH| D[WETH Unwrapper<br/>0x5703b6...9d4757]
     D -->|0.0959 WETH| E[WETH Contract<br/>0xc02aaa...756cc2<br/>ðŸ“¤ Log 254: Transfer Poolâ†’Router<br/>ðŸ“¤ Log 257: Transfer Routerâ†’Unwrapper<br/>ðŸ’¸ Log 258: Withdrawal<br/>WETH â†’ ETH]
     E -->|0.0959 ETH| D
     D -->|0.0959 ETH| B
     B -->|0.0959 ETH| A
     
     F[USDC Contract<br/>0xa0b869...6eb48<br/>ðŸ“¤ Log 255: Transfer<br/>From: User<br/>To: Pool<br/>Amount: 249.954 USDC] -.->|Transfer Log| C
     
     G[Log Details:<br/>Log 253: Router State Update<br/>Log 254: WETH Transfer Poolâ†’Router<br/>95,945,406,736,825,197 wei<br/>Log 255: USDC Transfer Userâ†’Pool<br/>249,954,047 units<br/>Log 256: Uniswap V3 Swap<br/>SqrtPrice: 0x4c848676a313cb7a0b8d33ab50e6<br/>Liquidity: 0x9f690c99a7cbc4<br/>Log 257: WETH Transfer Routerâ†’Unwrapper<br/>95,945,406,736,825,197 wei<br/>Log 258: WETH Withdrawal<br/>Unwrapper: 0x5703b6...<br/>Log 259: OrderRecord Complete<br/>TokenIn: USDC TokenOut: ETH]
     
     style A fill:#e1f5fe
     style B fill:#f3e5f5
     style C fill:#e8f5e8
     style D fill:#fff3e0
     style E fill:#fce4ec
     style F fill:#e3f2fd
     style G fill:#f1f8e9
     
     classDef tokenflow stroke:#2196f3,stroke-width:3px
     classDef ethflow stroke:#ff9800,stroke-width:3px
     classDef loginfo stroke:#4caf50,stroke-width:2px
     
     class A,B,C,D,E,F tokenflow
     class G loginfo
                                        </div>
                                    </div>
                                </details>
                                <details class="faq-item">
                                    <summary>Is my private key secure?</summary>
                                    <div class="faq-answer">
                                        Yes. The Payflow server runs entirely on your local machine. Your private key never leaves your computer. It is only used locally to sign payment requests, which are then sent to the agent.
                                    </div>
                                </details>
                                <details class="faq-item">
                                    <summary>What are MCP and x402?</summary>
                                    <div class="faq-answer">
                                        MCP (Model Context Protocol) allows AI models to securely access local tools. x402 is a standard for web micropayments. Payflow uses both to enable agentic commerce.
                                    </div>
                                </details>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <div class="container">
            <p class="footer-text">
                Powered by <a href="https://github.com/paradigmxyz/cryo" class="link" target="_blank">cryo</a> and <a
                    href="https://github.com/paradigmxyz/reth" class="link" target="_blank">reth</a> â€¢
                Built with <a href="https://github.com/modelcontextprotocol" class="link" target="_blank">MCP</a> â€¢
                Micropayments via <a href="https://www.x402.org" class="link" target="_blank">x402</a> â€¢
                Built by <a href="https://chainbound.io" class="link" target="_blank">Chainbound</a>
            </p>
        </div>
    </div>

    <script>
        function copyToClipboard() {
            const configText = document.getElementById('config').textContent;
            navigator.clipboard.writeText(configText).then(() => {
                const btn = document.querySelector('.copy-btn');
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy: ', err);
            });
        }
    </script>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'dark' });
    </script>
</body>

</html>